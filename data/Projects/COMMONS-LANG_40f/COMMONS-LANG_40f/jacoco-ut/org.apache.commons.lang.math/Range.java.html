<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Range.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Commons Lang</a> &gt; <a href="index.source.html" class="el_package">org.apache.commons.lang.math</a> &gt; <span class="el_source">Range.java</span></div><h1>Range.java</h1><pre class="source lang-java linenums">/*
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the &quot;License&quot;); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 * 
 *      http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package org.apache.commons.lang.math;

/**
 * &lt;p&gt;&lt;code&gt;Range&lt;/code&gt; represents a range of numbers of the same type.&lt;/p&gt;
 * 
 * &lt;p&gt;Specific subclasses hold the range values as different types. Each
 * subclass should be immutable and {@link java.io.Serializable Serializable}
 * if possible.&lt;/p&gt;
 *
 * @author Stephen Colebourne
 * @since 2.0
 * @version $Id$
 */
public abstract class Range {

    /**
     * &lt;p&gt;Constructs a new range.&lt;/p&gt;
     */
    public Range() {
<span class="fc" id="L36">        super();</span>
<span class="fc" id="L37">    }</span>

    // Accessors
    //--------------------------------------------------------------------

    /**
     * &lt;p&gt;Gets the minimum number in this range.&lt;/p&gt;
     *
     * @return the minimum number in this range
     */
    public abstract Number getMinimumNumber();

    /**
     * &lt;p&gt;Gets the minimum number in this range as a &lt;code&gt;long&lt;/code&gt;.&lt;/p&gt;
     * 
     * &lt;p&gt;This implementation uses the {@link #getMinimumNumber()} method. 
     * Subclasses may be able to optimise this.&lt;/p&gt;
     *
     * @return the minimum number in this range
     */
    public long getMinimumLong() {
<span class="fc" id="L58">        return getMinimumNumber().longValue();</span>
    }

    /**
     * &lt;p&gt;Gets the minimum number in this range as a &lt;code&gt;int&lt;/code&gt;.&lt;/p&gt;
     * 
     * &lt;p&gt;This implementation uses the {@link #getMinimumNumber()} method. 
     * Subclasses may be able to optimise this.&lt;/p&gt;
     *
     * @return the minimum number in this range
     */
    public int getMinimumInteger() {
<span class="fc" id="L70">        return getMinimumNumber().intValue();</span>
    }

    /**
     * &lt;p&gt;Gets the minimum number in this range as a &lt;code&gt;double&lt;/code&gt;.&lt;/p&gt;
     * 
     * &lt;p&gt;This implementation uses the {@link #getMinimumNumber()} method. 
     * Subclasses may be able to optimise this.&lt;/p&gt;
     *
     * @return the minimum number in this range
     */
    public double getMinimumDouble() {
<span class="fc" id="L82">        return getMinimumNumber().doubleValue();</span>
    }

    /**
     * &lt;p&gt;Gets the minimum number in this range as a &lt;code&gt;float&lt;/code&gt;.&lt;/p&gt;
     * 
     * &lt;p&gt;This implementation uses the {@link #getMinimumNumber()} method. 
     * Subclasses may be able to optimise this.&lt;/p&gt;
     *
     * @return the minimum number in this range
     */
    public float getMinimumFloat() {
<span class="fc" id="L94">        return getMinimumNumber().floatValue();</span>
    }

    /**
     * &lt;p&gt;Gets the maximum number in this range.&lt;/p&gt;
     *
     * @return the maximum number in this range
     */
    public abstract Number getMaximumNumber();

    /**
     * &lt;p&gt;Gets the maximum number in this range as a &lt;code&gt;long&lt;/code&gt;.&lt;/p&gt;
     * 
     * &lt;p&gt;This implementation uses the {@link #getMaximumNumber()} method. 
     * Subclasses may be able to optimise this.&lt;/p&gt;
     *
     * @return the maximum number in this range
     */
    public long getMaximumLong() {
<span class="fc" id="L113">        return getMaximumNumber().longValue();</span>
    }

    /**
     * &lt;p&gt;Gets the maximum number in this range as a &lt;code&gt;int&lt;/code&gt;.&lt;/p&gt;
     * 
     * &lt;p&gt;This implementation uses the {@link #getMaximumNumber()} method. 
     * Subclasses may be able to optimise this.&lt;/p&gt;
     *
     * @return the maximum number in this range
     */
    public int getMaximumInteger() {
<span class="fc" id="L125">        return getMaximumNumber().intValue();</span>
    }

    /**
     * &lt;p&gt;Gets the maximum number in this range as a &lt;code&gt;double&lt;/code&gt;.&lt;/p&gt;
     * 
     * &lt;p&gt;This implementation uses the {@link #getMaximumNumber()} method. 
     * Subclasses may be able to optimise this.&lt;/p&gt;
     *
     * @return the maximum number in this range
     */
    public double getMaximumDouble() {
<span class="fc" id="L137">        return getMaximumNumber().doubleValue();</span>
    }

    /**
     * &lt;p&gt;Gets the maximum number in this range as a &lt;code&gt;float&lt;/code&gt;.&lt;/p&gt;
     * 
     * &lt;p&gt;This implementation uses the {@link #getMaximumNumber()} method. 
     * Subclasses may be able to optimise this.&lt;/p&gt;
     *
     * @return the maximum number in this range
     */
    public float getMaximumFloat() {
<span class="fc" id="L149">        return getMaximumNumber().floatValue();</span>
    }

    // Include tests
    //--------------------------------------------------------------------
    
    /**
     * &lt;p&gt;Tests whether the specified &lt;code&gt;Number&lt;/code&gt; occurs within
     * this range.&lt;/p&gt;
     * 
     * &lt;p&gt;The exact comparison implementation varies by subclass. It is
     * intended that an &lt;code&gt;int&lt;/code&gt; specific subclass will compare using
     * &lt;code&gt;int&lt;/code&gt; comparison.&lt;/p&gt;
     * 
     * &lt;p&gt;&lt;code&gt;null&lt;/code&gt; is handled and returns &lt;code&gt;false&lt;/code&gt;.&lt;/p&gt;
     *
     * @param number  the number to test, may be &lt;code&gt;null&lt;/code&gt;
     * @return &lt;code&gt;true&lt;/code&gt; if the specified number occurs within this range
     * @throws IllegalArgumentException if the &lt;code&gt;Number&lt;/code&gt; cannot be compared
     */
    public abstract boolean containsNumber(Number number);

    /**
     * &lt;p&gt;Tests whether the specified &lt;code&gt;Number&lt;/code&gt; occurs within
     * this range using &lt;code&gt;long&lt;/code&gt; comparison..&lt;/p&gt;
     * 
     * &lt;p&gt;&lt;code&gt;null&lt;/code&gt; is handled and returns &lt;code&gt;false&lt;/code&gt;.&lt;/p&gt;
     * 
     * &lt;p&gt;This implementation forwards to the {@link #containsLong(long)} method.&lt;/p&gt;
     *
     * @param value  the long to test, may be &lt;code&gt;null&lt;/code&gt;
     * @return &lt;code&gt;true&lt;/code&gt; if the specified number occurs within this
     *  range by &lt;code&gt;long&lt;/code&gt; comparison
     */
    public boolean containsLong(Number value) {
<span class="fc bfc" id="L184" title="All 2 branches covered.">        if (value == null) {</span>
<span class="fc" id="L185">            return false;</span>
        }
<span class="fc" id="L187">        return containsLong(value.longValue());</span>
    }

    /**
     * &lt;p&gt;Tests whether the specified &lt;code&gt;long&lt;/code&gt; occurs within
     * this range using &lt;code&gt;long&lt;/code&gt; comparison.&lt;/p&gt;
     * 
     * &lt;p&gt;This implementation uses the {@link #getMinimumLong()} and 
     * {@link #getMaximumLong()} methods and should be good for most uses.&lt;/p&gt;
     * 
     * @param value  the long to test
     * @return &lt;code&gt;true&lt;/code&gt; if the specified number occurs within this
     *  range by &lt;code&gt;long&lt;/code&gt; comparison
     */
    public boolean containsLong(long value) {
<span class="fc bfc" id="L202" title="All 4 branches covered.">        return value &gt;= getMinimumLong() &amp;&amp; value &lt;= getMaximumLong();</span>
    }

    /**
     * &lt;p&gt;Tests whether the specified &lt;code&gt;Number&lt;/code&gt; occurs within
     * this range using &lt;code&gt;int&lt;/code&gt; comparison..&lt;/p&gt;
     * 
     * &lt;p&gt;&lt;code&gt;null&lt;/code&gt; is handled and returns &lt;code&gt;false&lt;/code&gt;.&lt;/p&gt;
     * 
     * &lt;p&gt;This implementation forwards to the {@link #containsInteger(int)} method.&lt;/p&gt;
     *
     * @param value  the integer to test, may be &lt;code&gt;null&lt;/code&gt;
     * @return &lt;code&gt;true&lt;/code&gt; if the specified number occurs within this
     *  range by &lt;code&gt;int&lt;/code&gt; comparison
     */
    public boolean containsInteger(Number value) {
<span class="fc bfc" id="L218" title="All 2 branches covered.">        if (value == null) {</span>
<span class="fc" id="L219">            return false;</span>
        }
<span class="fc" id="L221">        return containsInteger(value.intValue());</span>
    }

    /**
     * &lt;p&gt;Tests whether the specified &lt;code&gt;int&lt;/code&gt; occurs within
     * this range using &lt;code&gt;int&lt;/code&gt; comparison.&lt;/p&gt;
     * 
     * &lt;p&gt;This implementation uses the {@link #getMinimumInteger()} and 
     * {@link #getMaximumInteger()} methods and should be good for most uses.&lt;/p&gt;
     * 
     * @param value  the int to test
     * @return &lt;code&gt;true&lt;/code&gt; if the specified number occurs within this
     *  range by &lt;code&gt;int&lt;/code&gt; comparison
     */
    public boolean containsInteger(int value) {
<span class="fc bfc" id="L236" title="All 4 branches covered.">        return value &gt;= getMinimumInteger() &amp;&amp; value &lt;= getMaximumInteger();</span>
    }

    /**
     * &lt;p&gt;Tests whether the specified &lt;code&gt;Number&lt;/code&gt; occurs within
     * this range using &lt;code&gt;double&lt;/code&gt; comparison..&lt;/p&gt;
     * 
     * &lt;p&gt;&lt;code&gt;null&lt;/code&gt; is handled and returns &lt;code&gt;false&lt;/code&gt;.&lt;/p&gt;
     * 
     * &lt;p&gt;This implementation forwards to the {@link #containsDouble(double)} method.&lt;/p&gt;
     *
     * @param value  the double to test, may be &lt;code&gt;null&lt;/code&gt;
     * @return &lt;code&gt;true&lt;/code&gt; if the specified number occurs within this
     *  range by &lt;code&gt;double&lt;/code&gt; comparison
     */
    public boolean containsDouble(Number value) {
<span class="fc bfc" id="L252" title="All 2 branches covered.">        if (value == null) {</span>
<span class="fc" id="L253">            return false;</span>
        }
<span class="fc" id="L255">        return containsDouble(value.doubleValue());</span>
    }

    /**
     * &lt;p&gt;Tests whether the specified &lt;code&gt;double&lt;/code&gt; occurs within
     * this range using &lt;code&gt;double&lt;/code&gt; comparison.&lt;/p&gt;
     * 
     * &lt;p&gt;This implementation uses the {@link #getMinimumDouble()} and 
     * {@link #getMaximumDouble()} methods and should be good for most uses.&lt;/p&gt;
     * 
     * @param value  the double to test
     * @return &lt;code&gt;true&lt;/code&gt; if the specified number occurs within this
     *  range by &lt;code&gt;double&lt;/code&gt; comparison
     */
    public boolean containsDouble(double value) {
<span class="fc" id="L270">        int compareMin = Double.compare(getMinimumDouble(), value);</span>
<span class="fc" id="L271">        int compareMax = Double.compare(getMaximumDouble(), value);</span>
<span class="fc bfc" id="L272" title="All 4 branches covered.">        return compareMin &lt;= 0 &amp;&amp; compareMax &gt;= 0;</span>
    }

    /**
     * &lt;p&gt;Tests whether the specified &lt;code&gt;Number&lt;/code&gt; occurs within
     * this range using &lt;code&gt;float&lt;/code&gt; comparison.&lt;/p&gt;
     * 
     * &lt;p&gt;&lt;code&gt;null&lt;/code&gt; is handled and returns &lt;code&gt;false&lt;/code&gt;.&lt;/p&gt;
     * 
     * &lt;p&gt;This implementation forwards to the {@link #containsFloat(float)} method.&lt;/p&gt;
     *
     * @param value  the float to test, may be &lt;code&gt;null&lt;/code&gt;
     * @return &lt;code&gt;true&lt;/code&gt; if the specified number occurs within this
     *  range by &lt;code&gt;float&lt;/code&gt; comparison
     */
    public boolean containsFloat(Number value) {
<span class="fc bfc" id="L288" title="All 2 branches covered.">        if (value == null) {</span>
<span class="fc" id="L289">            return false;</span>
        }
<span class="fc" id="L291">        return containsFloat(value.floatValue());</span>
    }

    /**
     * &lt;p&gt;Tests whether the specified &lt;code&gt;float&lt;/code&gt; occurs within
     * this range using &lt;code&gt;float&lt;/code&gt; comparison.&lt;/p&gt;
     * 
     * &lt;p&gt;This implementation uses the {@link #getMinimumFloat()} and 
     * {@link #getMaximumFloat()} methods and should be good for most uses.&lt;/p&gt;
     * 
     * @param value  the float to test
     * @return &lt;code&gt;true&lt;/code&gt; if the specified number occurs within this
     *  range by &lt;code&gt;float&lt;/code&gt; comparison
     */
    public boolean containsFloat(float value) {
<span class="fc" id="L306">        int compareMin = Float.compare(getMinimumFloat(), value);</span>
<span class="fc" id="L307">        int compareMax = Float.compare(getMaximumFloat(), value);</span>
<span class="fc bfc" id="L308" title="All 4 branches covered.">        return compareMin &lt;= 0 &amp;&amp; compareMax &gt;= 0;</span>
    }

    // Range tests
    //--------------------------------------------------------------------

    /**
     * &lt;p&gt;Tests whether the specified range occurs entirely within this range.&lt;/p&gt;
     * 
     * &lt;p&gt;The exact comparison implementation varies by subclass. It is
     * intended that an &lt;code&gt;int&lt;/code&gt; specific subclass will compare using
     * &lt;code&gt;int&lt;/code&gt; comparison.&lt;/p&gt;
     * 
     * &lt;p&gt;&lt;code&gt;null&lt;/code&gt; is handled and returns &lt;code&gt;false&lt;/code&gt;.&lt;/p&gt;
     * 
     * &lt;p&gt;This implementation uses the {@link #containsNumber(Number)} method.
     * Subclasses may be able to optimise this.&lt;/p&gt;
     *
     * @param range  the range to test, may be &lt;code&gt;null&lt;/code&gt;
     * @return &lt;code&gt;true&lt;/code&gt; if the specified range occurs entirely within
     *  this range; otherwise, &lt;code&gt;false&lt;/code&gt;
     * @throws IllegalArgumentException if the &lt;code&gt;Range&lt;/code&gt; cannot be compared
     */
    public boolean containsRange(Range range) {
<span class="fc bfc" id="L332" title="All 2 branches covered.">        if (range == null) {</span>
<span class="fc" id="L333">            return false;</span>
        }
<span class="fc bfc" id="L335" title="All 2 branches covered.">        return containsNumber(range.getMinimumNumber()) </span>
<span class="fc bfc" id="L336" title="All 2 branches covered.">            &amp;&amp; containsNumber(range.getMaximumNumber());</span>
    }

    /**
     * &lt;p&gt;Tests whether the specified range overlaps with this range.&lt;/p&gt;
     * 
     * &lt;p&gt;The exact comparison implementation varies by subclass. It is
     * intended that an &lt;code&gt;int&lt;/code&gt; specific subclass will compare using
     * &lt;code&gt;int&lt;/code&gt; comparison.&lt;/p&gt;
     * 
     * &lt;p&gt;&lt;code&gt;null&lt;/code&gt; is handled and returns &lt;code&gt;false&lt;/code&gt;.&lt;/p&gt;
     * 
     * &lt;p&gt;This implementation uses the {@link #containsNumber(Number)} and
     * {@link #containsRange(Range)} methods.
     * Subclasses may be able to optimise this.&lt;/p&gt;
     *
     * @param range  the range to test, may be &lt;code&gt;null&lt;/code&gt;
     * @return &lt;code&gt;true&lt;/code&gt; if the specified range overlaps with this
     *  range; otherwise, &lt;code&gt;false&lt;/code&gt;
     * @throws IllegalArgumentException if the &lt;code&gt;Range&lt;/code&gt; cannot be compared
     */
    public boolean overlapsRange(Range range) {
<span class="fc bfc" id="L358" title="All 2 branches covered.">        if (range == null) {</span>
<span class="fc" id="L359">            return false;</span>
        }
<span class="fc bfc" id="L361" title="All 2 branches covered.">        return range.containsNumber(getMinimumNumber())</span>
<span class="fc bfc" id="L362" title="All 2 branches covered.">            || range.containsNumber(getMaximumNumber())</span>
<span class="fc bfc" id="L363" title="All 2 branches covered.">            || containsNumber(range.getMinimumNumber());</span>
    }

    // Basics
    //--------------------------------------------------------------------

    /**
     * &lt;p&gt;Compares this range to another object to test if they are equal.&lt;/p&gt;.
     * 
     * &lt;p&gt;To be equal, the class, minimum and maximum must be equal.&lt;/p&gt;
     * 
     * &lt;p&gt;This implementation uses the {@link #getMinimumNumber()} and 
     * {@link #getMaximumNumber()} methods. 
     * Subclasses may be able to optimise this.&lt;/p&gt;
     *
     * @param obj the reference object with which to compare
     * @return &lt;code&gt;true&lt;/code&gt; if this object is equal
     */
    @Override
    public boolean equals(Object obj) {
<span class="fc bfc" id="L383" title="All 2 branches covered.">        if (obj == this) {</span>
<span class="fc" id="L384">            return true;</span>
<span class="fc bfc" id="L385" title="All 4 branches covered.">        } else if (obj == null || obj.getClass() != getClass()) {</span>
<span class="fc" id="L386">            return false;</span>
        } else {
<span class="fc" id="L388">            Range range = (Range) obj;</span>
<span class="pc bpc" id="L389" title="1 of 2 branches missed.">            return getMinimumNumber().equals(range.getMinimumNumber()) &amp;&amp;</span>
<span class="fc bfc" id="L390" title="All 2 branches covered.">                   getMaximumNumber().equals(range.getMaximumNumber());</span>
        }
    }

    /**
     * &lt;p&gt;Gets a hashCode for the range.&lt;/p&gt;
     * 
     * &lt;p&gt;This implementation uses the {@link #getMinimumNumber()} and 
     * {@link #getMaximumNumber()} methods. 
     * Subclasses may be able to optimise this.&lt;/p&gt;
     *
     * @return a hash code value for this object
     */
    @Override
    public int hashCode() {
<span class="fc" id="L405">        int result = 17;</span>
<span class="fc" id="L406">        result = 37 * result + getClass().hashCode();</span>
<span class="fc" id="L407">        result = 37 * result + getMinimumNumber().hashCode();</span>
<span class="fc" id="L408">        result = 37 * result + getMaximumNumber().hashCode();</span>
<span class="fc" id="L409">        return result;</span>
    }

    /**
     * &lt;p&gt;Gets the range as a &lt;code&gt;String&lt;/code&gt;.&lt;/p&gt;
     *
     * &lt;p&gt;The format of the String is 'Range[&lt;i&gt;min&lt;/i&gt;,&lt;i&gt;max&lt;/i&gt;]'.&lt;/p&gt;
     * 
     * &lt;p&gt;This implementation uses the {@link #getMinimumNumber()} and 
     * {@link #getMaximumNumber()} methods. 
     * Subclasses may be able to optimise this.&lt;/p&gt;
     *
     * @return the &lt;code&gt;String&lt;/code&gt; representation of this range
     */
    @Override
    public String toString() {
<span class="fc" id="L425">        StringBuilder buf = new StringBuilder(32);</span>
<span class="fc" id="L426">        buf.append(&quot;Range[&quot;);</span>
<span class="fc" id="L427">        buf.append(getMinimumNumber());</span>
<span class="fc" id="L428">        buf.append(',');</span>
<span class="fc" id="L429">        buf.append(getMaximumNumber());</span>
<span class="fc" id="L430">        buf.append(']');</span>
<span class="fc" id="L431">        return buf.toString();</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>