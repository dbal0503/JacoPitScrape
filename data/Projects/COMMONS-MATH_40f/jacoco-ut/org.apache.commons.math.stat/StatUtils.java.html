<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>StatUtils.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Commons Math</a> &gt; <a href="index.source.html" class="el_package">org.apache.commons.math.stat</a> &gt; <span class="el_source">StatUtils.java</span></div><h1>StatUtils.java</h1><pre class="source lang-java linenums">/*
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the &quot;License&quot;); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package org.apache.commons.math.stat;

import org.apache.commons.math.exception.NumberIsTooSmallException;
import org.apache.commons.math.exception.DimensionMismatchException;
import org.apache.commons.math.exception.NoDataException;
import org.apache.commons.math.exception.util.LocalizedFormats;
import org.apache.commons.math.stat.descriptive.DescriptiveStatistics;
import org.apache.commons.math.stat.descriptive.UnivariateStatistic;
import org.apache.commons.math.stat.descriptive.moment.GeometricMean;
import org.apache.commons.math.stat.descriptive.moment.Mean;
import org.apache.commons.math.stat.descriptive.moment.Variance;
import org.apache.commons.math.stat.descriptive.rank.Max;
import org.apache.commons.math.stat.descriptive.rank.Min;
import org.apache.commons.math.stat.descriptive.rank.Percentile;
import org.apache.commons.math.stat.descriptive.summary.Product;
import org.apache.commons.math.stat.descriptive.summary.Sum;
import org.apache.commons.math.stat.descriptive.summary.SumOfLogs;
import org.apache.commons.math.stat.descriptive.summary.SumOfSquares;

/**
 * StatUtils provides static methods for computing statistics based on data
 * stored in double[] arrays.
 *
 * @version $Id$
 */
public final class StatUtils {

    /** sum */
<span class="fc" id="L45">    private static final UnivariateStatistic SUM = new Sum();</span>

    /** sumSq */
<span class="fc" id="L48">    private static final UnivariateStatistic SUM_OF_SQUARES = new SumOfSquares();</span>

    /** prod */
<span class="fc" id="L51">    private static final UnivariateStatistic PRODUCT = new Product();</span>

    /** sumLog */
<span class="fc" id="L54">    private static final UnivariateStatistic SUM_OF_LOGS = new SumOfLogs();</span>

    /** min */
<span class="fc" id="L57">    private static final UnivariateStatistic MIN = new Min();</span>

    /** max */
<span class="fc" id="L60">    private static final UnivariateStatistic MAX = new Max();</span>

    /** mean */
<span class="fc" id="L63">    private static final UnivariateStatistic MEAN = new Mean();</span>

    /** variance */
<span class="fc" id="L66">    private static final Variance VARIANCE = new Variance();</span>

    /** percentile */
<span class="fc" id="L69">    private static final Percentile PERCENTILE = new Percentile();</span>

    /** geometric mean */
<span class="fc" id="L72">    private static final GeometricMean GEOMETRIC_MEAN = new GeometricMean();</span>

    /**
     * Private Constructor
     */
    private StatUtils() {
    }

    /**
     * Returns the sum of the values in the input array, or
     * &lt;code&gt;Double.NaN&lt;/code&gt; if the array is empty.
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the input array
     * is null.&lt;/p&gt;
     *
     * @param values  array of values to sum
     * @return the sum of the values or &lt;code&gt;Double.NaN&lt;/code&gt; if the array
     * is empty
     * @throws IllegalArgumentException if the array is null
     */
    public static double sum(final double[] values) {
<span class="fc" id="L93">        return SUM.evaluate(values);</span>
    }

    /**
     * Returns the sum of the entries in the specified portion of
     * the input array, or &lt;code&gt;Double.NaN&lt;/code&gt; if the designated subarray
     * is empty.
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the array is null.&lt;/p&gt;
     *
     * @param values the input array
     * @param begin index of the first array element to include
     * @param length the number of elements to include
     * @return the sum of the values or Double.NaN if length = 0
     * @throws IllegalArgumentException if the array is null or the array index
     *  parameters are not valid
     */
    public static double sum(final double[] values, final int begin,
            final int length) {
<span class="fc" id="L112">        return SUM.evaluate(values, begin, length);</span>
    }

    /**
     * Returns the sum of the squares of the entries in the input array, or
     * &lt;code&gt;Double.NaN&lt;/code&gt; if the array is empty.
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the array is null.&lt;/p&gt;
     *
     * @param values  input array
     * @return the sum of the squared values or &lt;code&gt;Double.NaN&lt;/code&gt; if the
     * array is empty
     * @throws IllegalArgumentException if the array is null
     */
    public static double sumSq(final double[] values) {
<span class="fc" id="L127">        return SUM_OF_SQUARES.evaluate(values);</span>
    }

    /**
     * Returns the sum of the squares of the entries in the specified portion of
     * the input array, or &lt;code&gt;Double.NaN&lt;/code&gt; if the designated subarray
     * is empty.
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the array is null.&lt;/p&gt;
     *
     * @param values the input array
     * @param begin index of the first array element to include
     * @param length the number of elements to include
     * @return the sum of the squares of the values or Double.NaN if length = 0
     * @throws IllegalArgumentException if the array is null or the array index
     * parameters are not valid
     */
    public static double sumSq(final double[] values, final int begin,
            final int length) {
<span class="fc" id="L146">        return SUM_OF_SQUARES.evaluate(values, begin, length);</span>
    }

    /**
     * Returns the product of the entries in the input array, or
     * &lt;code&gt;Double.NaN&lt;/code&gt; if the array is empty.
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the array is null.&lt;/p&gt;
     *
     * @param values the input array
     * @return the product of the values or Double.NaN if the array is empty
     * @throws IllegalArgumentException if the array is null
     */
    public static double product(final double[] values) {
<span class="fc" id="L160">        return PRODUCT.evaluate(values);</span>
    }

    /**
     * Returns the product of the entries in the specified portion of
     * the input array, or &lt;code&gt;Double.NaN&lt;/code&gt; if the designated subarray
     * is empty.
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the array is null.&lt;/p&gt;
     *
     * @param values the input array
     * @param begin index of the first array element to include
     * @param length the number of elements to include
     * @return the product of the values or Double.NaN if length = 0
     * @throws IllegalArgumentException if the array is null or the array index
     * parameters are not valid
     */
    public static double product(final double[] values, final int begin,
            final int length) {
<span class="fc" id="L179">        return PRODUCT.evaluate(values, begin, length);</span>
    }

    /**
     * Returns the sum of the natural logs of the entries in the input array, or
     * &lt;code&gt;Double.NaN&lt;/code&gt; if the array is empty.
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the array is null.&lt;/p&gt;
     * &lt;p&gt;
     * See {@link org.apache.commons.math.stat.descriptive.summary.SumOfLogs}.
     * &lt;/p&gt;
     *
     * @param values the input array
     * @return the sum of the natural logs of the values or Double.NaN if
     * the array is empty
     * @throws IllegalArgumentException if the array is null
     */
    public static double sumLog(final double[] values) {
<span class="fc" id="L197">        return SUM_OF_LOGS.evaluate(values);</span>
    }

    /**
     * Returns the sum of the natural logs of the entries in the specified portion of
     * the input array, or &lt;code&gt;Double.NaN&lt;/code&gt; if the designated subarray
     * is empty.
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the array is null.&lt;/p&gt;
     * &lt;p&gt;
     * See {@link org.apache.commons.math.stat.descriptive.summary.SumOfLogs}.
     * &lt;/p&gt;
     *
     * @param values the input array
     * @param begin index of the first array element to include
     * @param length the number of elements to include
     * @return the sum of the natural logs of the values or Double.NaN if
     * length = 0
     * @throws IllegalArgumentException if the array is null or the array index
     * parameters are not valid
     */
    public static double sumLog(final double[] values, final int begin,
            final int length) {
<span class="fc" id="L220">        return SUM_OF_LOGS.evaluate(values, begin, length);</span>
    }

    /**
     * Returns the arithmetic mean of the entries in the input array, or
     * &lt;code&gt;Double.NaN&lt;/code&gt; if the array is empty.
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the array is null.&lt;/p&gt;
     * &lt;p&gt;
     * See {@link org.apache.commons.math.stat.descriptive.moment.Mean} for
     * details on the computing algorithm.&lt;/p&gt;
     *
     * @param values the input array
     * @return the mean of the values or Double.NaN if the array is empty
     * @throws IllegalArgumentException if the array is null
     */
    public static double mean(final double[] values) {
<span class="fc" id="L237">        return MEAN.evaluate(values);</span>
    }

    /**
     * Returns the arithmetic mean of the entries in the specified portion of
     * the input array, or &lt;code&gt;Double.NaN&lt;/code&gt; if the designated subarray
     * is empty.
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the array is null.&lt;/p&gt;
     * &lt;p&gt;
     * See {@link org.apache.commons.math.stat.descriptive.moment.Mean} for
     * details on the computing algorithm.&lt;/p&gt;
     *
     * @param values the input array
     * @param begin index of the first array element to include
     * @param length the number of elements to include
     * @return the mean of the values or Double.NaN if length = 0
     * @throws IllegalArgumentException if the array is null or the array index
     * parameters are not valid
     */
    public static double mean(final double[] values, final int begin,
            final int length) {
<span class="fc" id="L259">        return MEAN.evaluate(values, begin, length);</span>
    }

    /**
     * Returns the geometric mean of the entries in the input array, or
     * &lt;code&gt;Double.NaN&lt;/code&gt; if the array is empty.
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the array is null.&lt;/p&gt;
     * &lt;p&gt;
     * See {@link org.apache.commons.math.stat.descriptive.moment.GeometricMean}
     * for details on the computing algorithm.&lt;/p&gt;
     *
     * @param values the input array
     * @return the geometric mean of the values or Double.NaN if the array is empty
     * @throws IllegalArgumentException if the array is null
     */
    public static double geometricMean(final double[] values) {
<span class="fc" id="L276">        return GEOMETRIC_MEAN.evaluate(values);</span>
    }

    /**
     * Returns the geometric mean of the entries in the specified portion of
     * the input array, or &lt;code&gt;Double.NaN&lt;/code&gt; if the designated subarray
     * is empty.
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the array is null.&lt;/p&gt;
     * &lt;p&gt;
     * See {@link org.apache.commons.math.stat.descriptive.moment.GeometricMean}
     * for details on the computing algorithm.&lt;/p&gt;
     *
     * @param values the input array
     * @param begin index of the first array element to include
     * @param length the number of elements to include
     * @return the geometric mean of the values or Double.NaN if length = 0
     * @throws IllegalArgumentException if the array is null or the array index
     * parameters are not valid
     */
    public static double geometricMean(final double[] values, final int begin,
            final int length) {
<span class="fc" id="L298">        return GEOMETRIC_MEAN.evaluate(values, begin, length);</span>
    }


    /**
     * Returns the variance of the entries in the input array, or
     * &lt;code&gt;Double.NaN&lt;/code&gt; if the array is empty.
     *
     * &lt;p&gt;This method returns the bias-corrected sample variance (using {@code n - 1} in
     * the denominator).  Use {@link #populationVariance(double[])} for the non-bias-corrected
     * population variance.&lt;/p&gt;
     * &lt;p&gt;
     * See {@link org.apache.commons.math.stat.descriptive.moment.Variance} for
     * details on the computing algorithm.&lt;/p&gt;
     * &lt;p&gt;
     * Returns 0 for a single-value (i.e. length = 1) sample.&lt;/p&gt;
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the array is null.&lt;/p&gt;
     *
     * @param values the input array
     * @return the variance of the values or Double.NaN if the array is empty
     * @throws IllegalArgumentException if the array is null
     */
    public static double variance(final double[] values) {
<span class="fc" id="L322">        return VARIANCE.evaluate(values);</span>
    }

    /**
     * Returns the variance of the entries in the specified portion of
     * the input array, or &lt;code&gt;Double.NaN&lt;/code&gt; if the designated subarray
     * is empty.
     *
     * &lt;p&gt;This method returns the bias-corrected sample variance (using {@code n - 1} in
     * the denominator).  Use {@link #populationVariance(double[], int, int)} for the non-bias-corrected
     * population variance.&lt;/p&gt;
     * &lt;p&gt;
     * See {@link org.apache.commons.math.stat.descriptive.moment.Variance} for
     * details on the computing algorithm.&lt;/p&gt;
     * &lt;p&gt;
     * Returns 0 for a single-value (i.e. length = 1) sample.&lt;/p&gt;
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the array is null or the
     * array index parameters are not valid.&lt;/p&gt;
     *
     * @param values the input array
     * @param begin index of the first array element to include
     * @param length the number of elements to include
     * @return the variance of the values or Double.NaN if length = 0
     * @throws IllegalArgumentException if the array is null or the array index
     *  parameters are not valid
     */
    public static double variance(final double[] values, final int begin,
            final int length) {
<span class="fc" id="L351">        return VARIANCE.evaluate(values, begin, length);</span>
    }

    /**
     * Returns the variance of the entries in the specified portion of
     * the input array, using the precomputed mean value.  Returns
     * &lt;code&gt;Double.NaN&lt;/code&gt; if the designated subarray is empty.
     *
     * &lt;p&gt;This method returns the bias-corrected sample variance (using {@code n - 1} in
     * the denominator).  Use {@link #populationVariance(double[], double, int, int)} for the non-bias-corrected
     * population variance.&lt;/p&gt;
     * &lt;p&gt;
     * See {@link org.apache.commons.math.stat.descriptive.moment.Variance} for
     * details on the computing algorithm.&lt;/p&gt;
     * &lt;p&gt;
     * The formula used assumes that the supplied mean value is the arithmetic
     * mean of the sample data, not a known population parameter.  This method
     * is supplied only to save computation when the mean has already been
     * computed.&lt;/p&gt;
     * &lt;p&gt;
     * Returns 0 for a single-value (i.e. length = 1) sample.&lt;/p&gt;
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the array is null or the
     * array index parameters are not valid.&lt;/p&gt;
     *
     * @param values the input array
     * @param mean the precomputed mean value
     * @param begin index of the first array element to include
     * @param length the number of elements to include
     * @return the variance of the values or Double.NaN if length = 0
     * @throws IllegalArgumentException if the array is null or the array index
     *  parameters are not valid
     */
    public static double variance(final double[] values, final double mean,
            final int begin, final int length) {
<span class="fc" id="L386">        return VARIANCE.evaluate(values, mean, begin, length);</span>
    }

    /**
     * Returns the variance of the entries in the input array, using the
     * precomputed mean value.  Returns &lt;code&gt;Double.NaN&lt;/code&gt; if the array
     * is empty.
     *
     * &lt;p&gt;This method returns the bias-corrected sample variance (using {@code n - 1} in
     * the denominator).  Use {@link #populationVariance(double[], double)} for the non-bias-corrected
     * population variance.&lt;/p&gt;
     * &lt;p&gt;
     * See {@link org.apache.commons.math.stat.descriptive.moment.Variance} for
     * details on the computing algorithm.&lt;/p&gt;
     * &lt;p&gt;
     * The formula used assumes that the supplied mean value is the arithmetic
     * mean of the sample data, not a known population parameter.  This method
     * is supplied only to save computation when the mean has already been
     * computed.&lt;/p&gt;
     * &lt;p&gt;
     * Returns 0 for a single-value (i.e. length = 1) sample.&lt;/p&gt;
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the array is null.&lt;/p&gt;
     *
     * @param values the input array
     * @param mean the precomputed mean value
     * @return the variance of the values or Double.NaN if the array is empty
     * @throws IllegalArgumentException if the array is null
     */
    public static double variance(final double[] values, final double mean) {
<span class="fc" id="L416">        return VARIANCE.evaluate(values, mean);</span>
    }

    /**
     * Returns the &lt;a href=&quot;http://en.wikibooks.org/wiki/Statistics/Summary/Variance&quot;&gt;
     * population variance&lt;/a&gt; of the entries in the input array, or
     * &lt;code&gt;Double.NaN&lt;/code&gt; if the array is empty.
     * &lt;p&gt;
     * See {@link org.apache.commons.math.stat.descriptive.moment.Variance} for
     * details on the formula and computing algorithm.&lt;/p&gt;
     * &lt;p&gt;
     * Returns 0 for a single-value (i.e. length = 1) sample.&lt;/p&gt;
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the array is null.&lt;/p&gt;
     *
     * @param values the input array
     * @return the population variance of the values or Double.NaN if the array is empty
     * @throws IllegalArgumentException if the array is null
     */
    public static double populationVariance(final double[] values) {
<span class="nc" id="L436">        return new Variance(false).evaluate(values);</span>
    }

    /**
     * Returns the &lt;a href=&quot;http://en.wikibooks.org/wiki/Statistics/Summary/Variance&quot;&gt;
     * population variance&lt;/a&gt; of the entries in the specified portion of
     * the input array, or &lt;code&gt;Double.NaN&lt;/code&gt; if the designated subarray
     * is empty.
     * &lt;p&gt;
     * See {@link org.apache.commons.math.stat.descriptive.moment.Variance} for
     * details on the computing algorithm.&lt;/p&gt;
     * &lt;p&gt;
     * Returns 0 for a single-value (i.e. length = 1) sample.&lt;/p&gt;
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the array is null or the
     * array index parameters are not valid.&lt;/p&gt;
     *
     * @param values the input array
     * @param begin index of the first array element to include
     * @param length the number of elements to include
     * @return the population variance of the values or Double.NaN if length = 0
     * @throws IllegalArgumentException if the array is null or the array index
     *  parameters are not valid
     */
    public static double populationVariance(final double[] values, final int begin,
            final int length) {
<span class="fc" id="L462">        return new Variance(false).evaluate(values, begin, length);</span>
    }

    /**
     * Returns the &lt;a href=&quot;http://en.wikibooks.org/wiki/Statistics/Summary/Variance&quot;&gt;
     * population variance&lt;/a&gt; of the entries in the specified portion of
     * the input array, using the precomputed mean value.  Returns
     * &lt;code&gt;Double.NaN&lt;/code&gt; if the designated subarray is empty.
     * &lt;p&gt;
     * See {@link org.apache.commons.math.stat.descriptive.moment.Variance} for
     * details on the computing algorithm.&lt;/p&gt;
     * &lt;p&gt;
     * The formula used assumes that the supplied mean value is the arithmetic
     * mean of the sample data, not a known population parameter.  This method
     * is supplied only to save computation when the mean has already been
     * computed.&lt;/p&gt;
     * &lt;p&gt;
     * Returns 0 for a single-value (i.e. length = 1) sample.&lt;/p&gt;
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the array is null or the
     * array index parameters are not valid.&lt;/p&gt;
     *
     * @param values the input array
     * @param mean the precomputed mean value
     * @param begin index of the first array element to include
     * @param length the number of elements to include
     * @return the population variance of the values or Double.NaN if length = 0
     * @throws IllegalArgumentException if the array is null or the array index
     *  parameters are not valid
     */
    public static double populationVariance(final double[] values, final double mean,
            final int begin, final int length) {
<span class="fc" id="L494">        return new Variance(false).evaluate(values, mean, begin, length);</span>
    }

    /**
     * Returns the &lt;a href=&quot;http://en.wikibooks.org/wiki/Statistics/Summary/Variance&quot;&gt;
     * population variance&lt;/a&gt; of the entries in the input array, using the
     * precomputed mean value.  Returns &lt;code&gt;Double.NaN&lt;/code&gt; if the array
     * is empty.
     * &lt;p&gt;
     * See {@link org.apache.commons.math.stat.descriptive.moment.Variance} for
     * details on the computing algorithm.&lt;/p&gt;
     * &lt;p&gt;
     * The formula used assumes that the supplied mean value is the arithmetic
     * mean of the sample data, not a known population parameter.  This method
     * is supplied only to save computation when the mean has already been
     * computed.&lt;/p&gt;
     * &lt;p&gt;
     * Returns 0 for a single-value (i.e. length = 1) sample.&lt;/p&gt;
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the array is null.&lt;/p&gt;
     *
     * @param values the input array
     * @param mean the precomputed mean value
     * @return the population variance of the values or Double.NaN if the array is empty
     * @throws IllegalArgumentException if the array is null
     */
    public static double populationVariance(final double[] values, final double mean) {
<span class="nc" id="L521">        return new Variance(false).evaluate(values, mean);</span>
    }

    /**
     * Returns the maximum of the entries in the input array, or
     * &lt;code&gt;Double.NaN&lt;/code&gt; if the array is empty.
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the array is null.&lt;/p&gt;
     * &lt;p&gt;
     * &lt;ul&gt;
     * &lt;li&gt;The result is &lt;code&gt;NaN&lt;/code&gt; iff all values are &lt;code&gt;NaN&lt;/code&gt;
     * (i.e. &lt;code&gt;NaN&lt;/code&gt; values have no impact on the value of the statistic).&lt;/li&gt;
     * &lt;li&gt;If any of the values equals &lt;code&gt;Double.POSITIVE_INFINITY&lt;/code&gt;,
     * the result is &lt;code&gt;Double.POSITIVE_INFINITY.&lt;/code&gt;&lt;/li&gt;
     * &lt;/ul&gt;&lt;/p&gt;
     *
     * @param values the input array
     * @return the maximum of the values or Double.NaN if the array is empty
     * @throws IllegalArgumentException if the array is null
     */
    public static double max(final double[] values) {
<span class="fc" id="L542">        return MAX.evaluate(values);</span>
    }

    /**
     * Returns the maximum of the entries in the specified portion of
     * the input array, or &lt;code&gt;Double.NaN&lt;/code&gt; if the designated subarray
     * is empty.
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the array is null or
     * the array index parameters are not valid.&lt;/p&gt;
     * &lt;p&gt;
     * &lt;ul&gt;
     * &lt;li&gt;The result is &lt;code&gt;NaN&lt;/code&gt; iff all values are &lt;code&gt;NaN&lt;/code&gt;
     * (i.e. &lt;code&gt;NaN&lt;/code&gt; values have no impact on the value of the statistic).&lt;/li&gt;
     * &lt;li&gt;If any of the values equals &lt;code&gt;Double.POSITIVE_INFINITY&lt;/code&gt;,
     * the result is &lt;code&gt;Double.POSITIVE_INFINITY.&lt;/code&gt;&lt;/li&gt;
     * &lt;/ul&gt;&lt;/p&gt;
     *
     * @param values the input array
     * @param begin index of the first array element to include
     * @param length the number of elements to include
     * @return the maximum of the values or Double.NaN if length = 0
     * @throws IllegalArgumentException if the array is null or the array index
     * parameters are not valid
     */
    public static double max(final double[] values, final int begin,
            final int length) {
<span class="fc" id="L569">        return MAX.evaluate(values, begin, length);</span>
    }

     /**
     * Returns the minimum of the entries in the input array, or
     * &lt;code&gt;Double.NaN&lt;/code&gt; if the array is empty.
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the array is null.&lt;/p&gt;
     * &lt;p&gt;
     * &lt;ul&gt;
     * &lt;li&gt;The result is &lt;code&gt;NaN&lt;/code&gt; iff all values are &lt;code&gt;NaN&lt;/code&gt;
     * (i.e. &lt;code&gt;NaN&lt;/code&gt; values have no impact on the value of the statistic).&lt;/li&gt;
     * &lt;li&gt;If any of the values equals &lt;code&gt;Double.NEGATIVE_INFINITY&lt;/code&gt;,
     * the result is &lt;code&gt;Double.NEGATIVE_INFINITY.&lt;/code&gt;&lt;/li&gt;
     * &lt;/ul&gt; &lt;/p&gt;
     *
     * @param values the input array
     * @return the minimum of the values or Double.NaN if the array is empty
     * @throws IllegalArgumentException if the array is null
     */
    public static double min(final double[] values) {
<span class="fc" id="L590">        return MIN.evaluate(values);</span>
    }

     /**
     * Returns the minimum of the entries in the specified portion of
     * the input array, or &lt;code&gt;Double.NaN&lt;/code&gt; if the designated subarray
     * is empty.
     * &lt;p&gt;
     * Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if the array is null or
     * the array index parameters are not valid.&lt;/p&gt;
     * &lt;p&gt;
     * &lt;ul&gt;
     * &lt;li&gt;The result is &lt;code&gt;NaN&lt;/code&gt; iff all values are &lt;code&gt;NaN&lt;/code&gt;
     * (i.e. &lt;code&gt;NaN&lt;/code&gt; values have no impact on the value of the statistic).&lt;/li&gt;
     * &lt;li&gt;If any of the values equals &lt;code&gt;Double.NEGATIVE_INFINITY&lt;/code&gt;,
     * the result is &lt;code&gt;Double.NEGATIVE_INFINITY.&lt;/code&gt;&lt;/li&gt;
     * &lt;/ul&gt;&lt;/p&gt;
     *
     * @param values the input array
     * @param begin index of the first array element to include
     * @param length the number of elements to include
     * @return the minimum of the values or Double.NaN if length = 0
     * @throws IllegalArgumentException if the array is null or the array index
     * parameters are not valid
     */
    public static double min(final double[] values, final int begin,
            final int length) {
<span class="fc" id="L617">        return MIN.evaluate(values, begin, length);</span>
    }

    /**
     * Returns an estimate of the &lt;code&gt;p&lt;/code&gt;th percentile of the values
     * in the &lt;code&gt;values&lt;/code&gt; array.
     * &lt;p&gt;
     * &lt;ul&gt;
     * &lt;li&gt;Returns &lt;code&gt;Double.NaN&lt;/code&gt; if &lt;code&gt;values&lt;/code&gt; has length
     * &lt;code&gt;0&lt;/code&gt;&lt;/li&gt;&lt;/p&gt;
     * &lt;li&gt;Returns (for any value of &lt;code&gt;p&lt;/code&gt;) &lt;code&gt;values[0]&lt;/code&gt;
     *  if &lt;code&gt;values&lt;/code&gt; has length &lt;code&gt;1&lt;/code&gt;&lt;/li&gt;
     * &lt;li&gt;Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if &lt;code&gt;values&lt;/code&gt;
     * is null  or p is not a valid quantile value (p must be greater than 0
     * and less than or equal to 100)&lt;/li&gt;
     * &lt;/ul&gt;&lt;/p&gt;
     * &lt;p&gt;
     * See {@link org.apache.commons.math.stat.descriptive.rank.Percentile} for
     * a description of the percentile estimation algorithm used.&lt;/p&gt;
     *
     * @param values input array of values
     * @param p the percentile value to compute
     * @return the percentile value or Double.NaN if the array is empty
     * @throws IllegalArgumentException if &lt;code&gt;values&lt;/code&gt; is null
     * or p is invalid
     */
    public static double percentile(final double[] values, final double p) {
<span class="fc" id="L644">            return PERCENTILE.evaluate(values,p);</span>
    }

     /**
     * Returns an estimate of the &lt;code&gt;p&lt;/code&gt;th percentile of the values
     * in the &lt;code&gt;values&lt;/code&gt; array, starting with the element in (0-based)
     * position &lt;code&gt;begin&lt;/code&gt; in the array and including &lt;code&gt;length&lt;/code&gt;
     * values.
     * &lt;p&gt;
     * &lt;ul&gt;
     * &lt;li&gt;Returns &lt;code&gt;Double.NaN&lt;/code&gt; if &lt;code&gt;length = 0&lt;/code&gt;&lt;/li&gt;
     * &lt;li&gt;Returns (for any value of &lt;code&gt;p&lt;/code&gt;) &lt;code&gt;values[begin]&lt;/code&gt;
     *  if &lt;code&gt;length = 1 &lt;/code&gt;&lt;/li&gt;
     * &lt;li&gt;Throws &lt;code&gt;IllegalArgumentException&lt;/code&gt; if &lt;code&gt;values&lt;/code&gt;
     *  is null , &lt;code&gt;begin&lt;/code&gt; or &lt;code&gt;length&lt;/code&gt; is invalid, or
     * &lt;code&gt;p&lt;/code&gt; is not a valid quantile value (p must be greater than 0
     * and less than or equal to 100)&lt;/li&gt;
     * &lt;/ul&gt;&lt;/p&gt;
     * &lt;p&gt;
      * See {@link org.apache.commons.math.stat.descriptive.rank.Percentile} for
      * a description of the percentile estimation algorithm used.&lt;/p&gt;
     *
     * @param values array of input values
     * @param p  the percentile to compute
     * @param begin  the first (0-based) element to include in the computation
     * @param length  the number of array elements to include
     * @return  the percentile value
     * @throws IllegalArgumentException if the parameters are not valid or the
     * input array is null
     */
    public static double percentile(final double[] values, final int begin,
            final int length, final double p) {
<span class="fc" id="L676">        return PERCENTILE.evaluate(values, begin, length, p);</span>
    }

    /**
     * Returns the sum of the (signed) differences between corresponding elements of the
     * input arrays -- i.e., sum(sample1[i] - sample2[i]).
     *
     * @param sample1  the first array
     * @param sample2  the second array
     * @return sum of paired differences
     * @throws DimensionMismatchException if the arrays do not have the same
     * (positive) length.
     * @throws NoDataException if the sample arrays are empty.
     */
    public static double sumDifference(final double[] sample1, final double[] sample2) {
<span class="fc" id="L691">        int n = sample1.length;</span>
<span class="fc bfc" id="L692" title="All 2 branches covered.">        if (n != sample2.length) {</span>
<span class="fc" id="L693">            throw new DimensionMismatchException(n, sample2.length);</span>
        }
<span class="pc bpc" id="L695" title="1 of 2 branches missed.">        if (n &lt;= 0) {</span>
<span class="nc" id="L696">            throw new NoDataException(LocalizedFormats.INSUFFICIENT_DIMENSION);</span>
        }
<span class="fc" id="L698">        double result = 0;</span>
<span class="fc bfc" id="L699" title="All 2 branches covered.">        for (int i = 0; i &lt; n; i++) {</span>
<span class="fc" id="L700">            result += sample1[i] - sample2[i];</span>
        }
<span class="fc" id="L702">        return result;</span>
    }

    /**
     * Returns the mean of the (signed) differences between corresponding elements of the
     * input arrays -- i.e., sum(sample1[i] - sample2[i]) / sample1.length.
     *
     * @param sample1  the first array
     * @param sample2  the second array
     * @return mean of paired differences
     * @throws DimensionMismatchException if the arrays do not have the same
     * (positive) length.
     * @throws NoDataException if the sample arrays are empty.
     */
    public static double meanDifference(final double[] sample1, final double[] sample2) {
<span class="fc" id="L717">        return sumDifference(sample1, sample2) / sample1.length;</span>
    }

    /**
     * Returns the variance of the (signed) differences between corresponding elements of the
     * input arrays -- i.e., var(sample1[i] - sample2[i]).
     *
     * @param sample1  the first array
     * @param sample2  the second array
     * @param meanDifference   the mean difference between corresponding entries
     * @see #meanDifference(double[],double[])
     * @return variance of paired differences
     * @throws DimensionMismatchException if the arrays do not have the same
     * length.
     * @throws NumberIsTooSmallException if the arrays length is less than 2.
     */
    public static double varianceDifference(final double[] sample1,
                                            final double[] sample2,
                                            double meanDifference) {
<span class="fc" id="L736">        double sum1 = 0d;</span>
<span class="fc" id="L737">        double sum2 = 0d;</span>
<span class="fc" id="L738">        double diff = 0d;</span>
<span class="fc" id="L739">        int n = sample1.length;</span>
<span class="fc bfc" id="L740" title="All 2 branches covered.">        if (n != sample2.length) {</span>
<span class="fc" id="L741">            throw new DimensionMismatchException(n, sample2.length);</span>
        }
<span class="fc bfc" id="L743" title="All 2 branches covered.">        if (n &lt; 2) {</span>
<span class="fc" id="L744">            throw new NumberIsTooSmallException(n, 2, true);</span>
        }
<span class="fc bfc" id="L746" title="All 2 branches covered.">        for (int i = 0; i &lt; n; i++) {</span>
<span class="fc" id="L747">            diff = sample1[i] - sample2[i];</span>
<span class="fc" id="L748">            sum1 += (diff - meanDifference) *(diff - meanDifference);</span>
<span class="fc" id="L749">            sum2 += diff - meanDifference;</span>
        }
<span class="fc" id="L751">        return (sum1 - (sum2 * sum2 / n)) / (n - 1);</span>
    }

    /**
     * Normalize (standardize) the series, so in the end it is having a mean of 0 and a standard deviation of 1.
     *
     * @param sample Sample to normalize.
     * @return normalized (standardized) sample.
     * @since 2.2
     */
    public static double[] normalize(final double[] sample) {
<span class="fc" id="L762">        DescriptiveStatistics stats = new DescriptiveStatistics();</span>

        // Add the data from the series to stats
<span class="fc bfc" id="L765" title="All 2 branches covered.">        for (int i = 0; i &lt; sample.length; i++) {</span>
<span class="fc" id="L766">            stats.addValue(sample[i]);</span>
        }

        // Compute mean and standard deviation
<span class="fc" id="L770">        double mean = stats.getMean();</span>
<span class="fc" id="L771">        double standardDeviation = stats.getStandardDeviation();</span>

        // initialize the standardizedSample, which has the same length as the sample
<span class="fc" id="L774">        double[] standardizedSample = new double[sample.length];</span>

<span class="fc bfc" id="L776" title="All 2 branches covered.">        for (int i = 0; i &lt; sample.length; i++) {</span>
            // z = (x- mean)/standardDeviation
<span class="fc" id="L778">            standardizedSample[i] = (sample[i] - mean) / standardDeviation;</span>
        }
<span class="fc" id="L780">        return standardizedSample;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>